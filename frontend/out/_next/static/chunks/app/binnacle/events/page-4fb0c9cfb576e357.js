(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[67],{71705:(e,t,s)=>{Promise.resolve().then(s.bind(s,31460))},31460:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var l=s(95155),a=s(61831),n=s(12115),r=s(76154),i=s(98930),o=s(9693),c=s(59599),d=s(97678),h=s(47942),m=s(19083),p=s(45574),u=s(74665),x=s(79426),f=s(21455),g=s.n(f);let j=e=>{let{event:t,fetch:s}=e,[i,o]=(0,n.useState)({title:"",description:"",responsible:"",startDate:g()(),endDate:g()(),attachment:[]}),f=async()=>{if(!i.title||!i.responsible||!i.description){alert("Por favor llene todos los campos");return}console.log(i),console.log(await (0,c.VP)({title:i.title,description:i.description,responsible:i.responsible,registry_date:i.startDate.format("YYYY-MM-DD HH:mm:ss"),estimated_date:i.endDate.format("YYYY-MM-DD HH:mm:ss"),event_id:t.id,attachment:i.attachment})),s()};return(0,l.jsxs)(r.Dz,{size:"lg",children:[t?(0,l.jsx)(r.zM,{className:(0,a.AH)({padding:"4",fontSize:"16px",bg:"black",color:"white",borderRadius:"md",whiteSpace:"nowrap",_hover:{bg:"blue.600"}}),children:"Crear Acci\xf3n"}):(0,l.jsx)(l.Fragment,{}),(0,l.jsxs)(r.Cf,{children:[(0,l.jsxs)(r.c7,{children:[(0,l.jsx)(r.L3,{children:"Crear acci\xf3n"}),(0,l.jsx)(r.tK,{})]}),(0,l.jsxs)(r.R4,{children:[(0,l.jsx)(h.D,{label:"Nombre de la acci\xf3n:",required:!0,children:(0,l.jsx)(m.p,{placeholder:"Ingrese el nombre de la acci\xf3n",value:i.title,onChange:e=>o({...i,title:e.target.value})})}),(0,l.jsx)(h.D,{label:"Responsable:",required:!0,children:(0,l.jsx)(m.p,{placeholder:"Ingrese el responsable",value:i.responsible,onChange:e=>o({...i,responsible:e.target.value})})}),(0,l.jsxs)("div",{className:(0,a.AH)({display:"flex",flexDirection:"row",justifyContent:"space-between"}),children:[(0,l.jsx)("div",{className:(0,a.AH)({display:"flex",flexDirection:"column"}),children:(0,l.jsxs)(h.D,{children:["Fecha de inicio:",(0,l.jsx)(x.A,{value:i.startDate,onChange:e=>o({...i,startDate:g()(e)})})]})}),(0,l.jsx)("div",{className:(0,a.AH)({display:"flex",flexDirection:"column"}),children:(0,l.jsxs)(h.D,{children:["Fecha de fin:",(0,l.jsx)(x.A,{value:i.endDate,onChange:e=>o({...i,endDate:g()(e)})})]})})]}),(0,l.jsx)(h.D,{label:"Descripci\xf3n:",required:!0,children:(0,l.jsx)(p.T,{size:"xl",placeholder:"Ingrese la descripci\xf3n",value:i.description,onChange:e=>o({...i,description:e.target.value})})}),(0,l.jsx)(h.D,{label:"Adjuntos",helperText:"Archivos permitidos: .pdf, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .jpg, .jpeg, .png",children:(0,l.jsxs)(d.YM,{maxW:"100%",alignItems:"stretch",maxFiles:10,maxFileSize:0x2800000,onFileChange:e=>{o({...i,attachment:e.acceptedFiles})},accept:["image/*","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],children:[(0,l.jsx)(d.fT,{label:"Arrastre archivos aqu\xed o haga click para seleccionar",description:"hasta 40MB, m\xe1ximo 10 archivos"}),(0,l.jsx)(d.ud,{clearable:!0})]})}),(0,l.jsx)(r.Tt,{asChild:!0,children:(0,l.jsx)(u.$,{type:"submit",onClick:()=>{f()},children:"Crear"})})]})]})]})};var b=s(12117),v=s(50741),w=s(83363),y=s(35956),C=s(20177),A=s(19127),k=s(46709);let S=async e=>{try{let t=await fetch("".concat("http://localhost:5000","/exports/pdf/").concat(e),{method:"get",credentials:"include"});if(!t.ok)throw Error("Network response was not ok");let s=await t.blob(),l=window.URL.createObjectURL(s),a=document.createElement("a");a.href=l,a.download="event_".concat(e,".pdf"),a.click(),window.URL.revokeObjectURL(l)}catch(e){console.error("Error downloading PDF:",e)}},D=e=>{let{eventId:t}=e;return(0,l.jsx)("div",{children:(0,l.jsx)(u.$,{onClick:()=>S(t),children:"Exportar a PDF"})})},N=(0,y.Rk)({items:[{value:"abierto",label:"Abierto"},{value:"cerrado",label:"Cerrado"},{value:"en proceso",label:"En proceso"}]}),H=e=>{let{event:t,fetch:s}=e,[d,h]=(0,n.useState)(""),m=(0,n.useRef)(null),p=async()=>{await (0,c.wA)(t.id,{status:d[0]}),s(await (0,c.Z8)(t.id))};return(0,l.jsxs)(r.Dz,{children:[(0,l.jsx)(r.zM,{className:(0,a.AH)({padding:"10px 20px",fontSize:"16px",bg:"green",color:"white",borderRadius:"md",_hover:{bg:"blue.600"}}),children:"Cambiar estado"}),(0,l.jsx)(o.K2,{children:(0,l.jsxs)(r.Cf,{ref:m,children:[(0,l.jsx)(r.c7,{className:(0,a.AH)({color:"black",fontSize:"lg",fontWeight:"bold"}),children:"Cambiar estado del evento"}),(0,l.jsx)(r.tK,{}),(0,l.jsxs)(r.R4,{children:[(0,l.jsx)("p",{children:"Seleccione un estado"}),(0,l.jsxs)(i.H5,{collection:N,value:d,onValueChange:e=>h(e.value),children:[(0,l.jsx)(i.bq,{children:(0,l.jsx)(i.NM,{placeholder:"Estado"})}),(0,l.jsx)(i.gC,{portalRef:m,children:N.items.map(e=>(0,l.jsx)(i.eb,{item:e,children:e.label},e.value))})]}),(0,l.jsxs)("div",{className:(0,a.AH)({display:"flex",flexDirection:"row",gap:"4",justifyContent:"space-between",padding:"4"}),children:[(0,l.jsx)(r.Tt,{asChild:!0,children:(0,l.jsx)(u.$,{className:(0,a.AH)({bg:"red"}),onClick:p,children:"Guardar"})}),(0,l.jsx)(r.Tt,{asChild:!0,children:(0,l.jsx)(u.$,{className:(0,a.AH)({bg:"black"}),children:"Cerrar"})})]})]})]})})]})},E=e=>{let{event:t}=e,[s,i]=(0,n.useState)({}),d=async()=>{i(await (0,c.TO)(t.user_id))};return(0,l.jsxs)(r.Dz,{children:[(0,l.jsx)(r.zM,{onClick:d,className:(0,a.AH)({padding:"10px 20px",fontSize:"16px",bg:"black",color:"white",borderRadius:"md",_hover:{bg:"blue.600"}}),children:"Ver detalles"}),(0,l.jsx)(o.K2,{children:(0,l.jsxs)(r.Cf,{children:[(0,l.jsx)(r.c7,{className:(0,a.AH)({color:"black",fontSize:"lg",fontWeight:"bold"}),children:t.title}),(0,l.jsx)(r.tK,{}),(0,l.jsxs)(r.R4,{children:[(0,l.jsxs)("p",{children:["Usuario: ",s.name]}),(0,l.jsxs)("p",{children:["Responsable: ",t.responsible]}),(0,l.jsxs)("p",{children:["Fecha de inicio: ",t.start_date]}),(0,l.jsxs)("p",{children:["Fecha de fin: ",t.end_date]})]})]})})]})},z=e=>{let{attachment:t}=e,s=(0,n.useRef)(null);return(0,l.jsxs)(r.Dz,{size:"sm",children:[(0,l.jsx)(r.zM,{className:(0,a.AH)({padding:"10px 20px",fontSize:"16px",bg:"black",color:"white",borderRadius:"md",_hover:{bg:"blue.600"}}),children:t.filename}),(0,l.jsx)(o.K2,{children:(0,l.jsxs)(r.Cf,{children:[(0,l.jsx)(r.c7,{className:(0,a.AH)({color:"black",fontSize:"lg",fontWeight:"bold"}),children:t.filename}),(0,l.jsx)(r.tK,{ref:s}),(0,l.jsx)(r.R4,{children:(0,l.jsxs)("div",{className:(0,a.AH)({display:"flex",flexDirection:"column",gap:"4",backgroundColor:"white"}),children:[(0,l.jsxs)("p",{children:["Fecha de registro: ",(0,b.R)(t.uploaded_at)]}),(0,l.jsx)(w.A,{fileId:t.id}),console.log(t),(0,l.jsx)(v.A,{fileId:t.id,fileName:t.filename})]})})]})})]})},R=e=>{let{action:t}=e,[s,i]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(0,c.Gs)(t.id,"actions").then(e=>{i(e)})},[]),(0,l.jsxs)(r.Dz,{size:"xl",children:[(0,l.jsxs)("div",{className:(0,a.AH)({display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"}),children:[(0,l.jsx)("p",{children:(0,b.R)(t.registry_date)}),(0,l.jsx)(r.zM,{className:(0,a.AH)({padding:"10px 20px",fontSize:"16px",bg:"blue.500",color:"white",borderRadius:"md",_hover:{bg:"blue.600"},width:"80%"}),children:t.title})]}),(0,l.jsx)(o.K2,{children:(0,l.jsxs)(r.Cf,{children:[(0,l.jsx)(r.c7,{className:(0,a.AH)({color:"black",fontSize:"lg",fontWeight:"bold"}),children:t.title}),(0,l.jsx)(r.tK,{}),(0,l.jsxs)(r.R4,{children:[(0,l.jsx)("p",{children:t.description}),(0,l.jsxs)("p",{children:["Fecha de registro: ",(0,b.R)(t.registry_date)]}),(0,l.jsxs)("p",{children:["Fecha estimada: ",(0,b.R)(t.estimated_date)]}),(0,l.jsxs)("p",{children:["Responsable: ",t.responsible]}),(0,l.jsx)("h1",{className:(0,a.AH)({paddingTop:4,fontWeight:"bold"}),children:" Adjuntos"}),(0,l.jsx)(C.a,{w:"full",h:"15vh",overflowY:"auto",border:"1px solid",borderColor:"gray.300",p:2,children:(0,l.jsx)(A.x,{templateColumns:"repeat(4, 1fr)",className:(0,a.AH)({gap:"4",justifyContent:"center",paddingTop:4}),children:s&&s.map((e,t)=>(0,l.jsx)(k.E,{display:"flex",justifyContent:"center",children:(0,l.jsx)(z,{attachment:e},e.id)},t))})})]})]})})]})};function T(){let[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)([]),[i,o]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=parseInt(sessionStorage.getItem("eventId"));o(e),(0,c.Z8)(e).then(e=>{t(e)}),(0,c.tq)(e).then(e=>{r(e)})},[]),(0,l.jsxs)("div",{className:(0,a.AH)({backgroundColor:"white",display:"flex",flexDirection:"column",gap:"4",width:"100%",alignItems:"center",height:"100%"}),children:[(0,l.jsxs)("div",{className:(0,a.AH)({display:"flex",flexDirection:"row",padding:"4",gap:"4",justifyContent:"space-between",width:"100%"}),children:[(0,l.jsx)(D,{eventId:e.id}),(0,l.jsxs)("h1",{className:(0,a.AH)({color:"black",fontSize:"lg",fontWeight:"bold"}),children:[" ",e?"".concat(e.title," â€¢ ").concat(e.status):"Cargando"]}),(0,l.jsx)(E,{event:e})]}),(0,l.jsx)("div",{className:(0,a.AH)({display:"flex",flexDirection:"column",gap:"4",width:"100%",padding:"4",overflowY:"auto",height:"70vh"}),children:s&&s.map(e=>(0,l.jsx)(R,{action:e},e.id))}),(0,l.jsxs)("div",{className:(0,a.AH)({display:"flex",flexDirection:"row",gap:"4",justifyContent:"space-between",paddingStart:"45vw",width:"100%",borderTop:"1px solid"}),children:[(0,l.jsx)(j,{event:e,fetch:()=>(0,c.tq)(i).then(e=>{r(e)})}),(0,l.jsx)(H,{event:e,fetch:e=>t(e)})]})]})}},9693:(e,t,s)=>{"use strict";s.d(t,{ColorModeProvider:()=>r,G6:()=>i,K2:()=>o});var l=s(95155),a=s(4688),n=s(67113);function r(e){return(0,l.jsx)(n.N,{attribute:"class",disableTransitionOnChange:!0,...e})}function i(){let{resolvedTheme:e,setTheme:t}=(0,n.D)();return{colorMode:e,setColorMode:t,toggleColorMode:()=>{t("dark"===e?"light":"dark")}}}let o=s(12115).forwardRef(function(e,t){return(0,l.jsx)(a.L,{color:"fg",display:"contents",className:"chakra-theme light",colorPalette:"gray",colorScheme:"light",ref:t,...e})})},67113:(e,t,s)=>{"use strict";s.d(t,{D:()=>d,N:()=>h});var l=s(12115),a=(e,t,s,l,a,n,r,i)=>{let o=document.documentElement,c=["light","dark"];function d(t){(Array.isArray(e)?e:[e]).forEach(e=>{let s="class"===e,l=s&&n?a.map(e=>n[e]||e):a;s?(o.classList.remove(...l),o.classList.add(t)):o.setAttribute(e,t)}),i&&c.includes(t)&&(o.style.colorScheme=t)}if(l)d(l);else try{let e=localStorage.getItem(t)||s,l=r&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;d(l)}catch(e){}},n=["light","dark"],r="(prefers-color-scheme: dark)",i="undefined"==typeof window,o=l.createContext(void 0),c={setTheme:e=>{},themes:[]},d=()=>{var e;return null!=(e=l.useContext(o))?e:c},h=e=>l.useContext(o)?l.createElement(l.Fragment,null,e.children):l.createElement(p,{...e}),m=["light","dark"],p=e=>{let{forcedTheme:t,disableTransitionOnChange:s=!1,enableSystem:a=!0,enableColorScheme:i=!0,storageKey:c="theme",themes:d=m,defaultTheme:h=a?"system":"light",attribute:p="data-theme",value:j,children:b,nonce:v,scriptProps:w}=e,[y,C]=l.useState(()=>x(c,h)),[A,k]=l.useState(()=>x(c)),S=j?Object.values(j):d,D=l.useCallback(e=>{let t=e;if(!t)return;"system"===e&&a&&(t=g());let l=j?j[t]:t,r=s?f(v):null,o=document.documentElement,c=e=>{"class"===e?(o.classList.remove(...S),l&&o.classList.add(l)):e.startsWith("data-")&&(l?o.setAttribute(e,l):o.removeAttribute(e))};if(Array.isArray(p)?p.forEach(c):c(p),i){let e=n.includes(h)?h:null,s=n.includes(t)?t:e;o.style.colorScheme=s}null==r||r()},[v]),N=l.useCallback(e=>{let t="function"==typeof e?e(y):e;C(t);try{localStorage.setItem(c,t)}catch(e){}},[y]),H=l.useCallback(e=>{k(g(e)),"system"===y&&a&&!t&&D("system")},[y,t]);l.useEffect(()=>{let e=window.matchMedia(r);return e.addListener(H),H(e),()=>e.removeListener(H)},[H]),l.useEffect(()=>{let e=e=>{e.key===c&&(e.newValue?C(e.newValue):N(h))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[N]),l.useEffect(()=>{D(null!=t?t:y)},[t,y]);let E=l.useMemo(()=>({theme:y,setTheme:N,forcedTheme:t,resolvedTheme:"system"===y?A:y,themes:a?[...d,"system"]:d,systemTheme:a?A:void 0}),[y,N,t,A,a,d]);return l.createElement(o.Provider,{value:E},l.createElement(u,{forcedTheme:t,storageKey:c,attribute:p,enableSystem:a,enableColorScheme:i,defaultTheme:h,value:j,themes:d,nonce:v,scriptProps:w}),b)},u=l.memo(e=>{let{forcedTheme:t,storageKey:s,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:c,themes:d,nonce:h,scriptProps:m}=e,p=JSON.stringify([n,s,o,t,d,c,r,i]).slice(1,-1);return l.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?h:"",dangerouslySetInnerHTML:{__html:"(".concat(a.toString(),")(").concat(p,")")}})}),x=(e,t)=>{let s;if(!i){try{s=localStorage.getItem(e)||void 0}catch(e){}return s||t}},f=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},g=e=>(e||(e=window.matchMedia(r)),e.matches?"dark":"light")}},e=>{var t=t=>e(e.s=t);e.O(0,[150,73,344,553,932,239,446,816,324,441,517,358],()=>t(71705)),_N_E=e.O()}]);